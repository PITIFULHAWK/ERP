model Payment {
  id               String        @id @default(uuid())
  userId           String
  type             PaymentType
  courseId         String?
  hostelId         String?
  amount           Float
  currency         String        @default("INR")
  method           PaymentMethod @default(MANUAL)
  status           PaymentStatus @default(PENDING)
  reference        String?
  gatewayOrderId   String?
  gatewayPaymentId String?
  gatewaySignature String?
  notes            String?
  createdAt        DateTime      @default(now())
  updatedAt        DateTime      @updatedAt
  course           Course?       @relation(fields: [courseId], references: [id])
  hostel           Hostel?       @relation(fields: [hostelId], references: [id])
  user             User          @relation(fields: [userId], references: [id])
  receipts         Receipt[]

  @@map("payments")
}

model Receipt {
  id           String   @id @default(uuid())
  paymentId    String
  mediaUrl     String
  mediaType    String
  uploadedById String
  notes        String?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  payment      Payment  @relation(fields: [paymentId], references: [id])
  uploadedBy   User     @relation(fields: [uploadedById], references: [id])

  @@map("receipts")
}

enum PaymentType {
  COURSE
  HOSTEL
}

enum PaymentStatus {
  PENDING
  SUCCESS
  FAILED
}

enum PaymentMethod {
  MANUAL
  RAZORPAY
  CARD
  UPI
}
