model Exam {
  id         String       @id @default(uuid())
  name       String
  type       ExamType
  examDate   DateTime
  maxMarks   Float        @default(100)
  semesterId String
  createdAt  DateTime     @default(now())
  updatedAt  DateTime     @updatedAt
  results    ExamResult[]
  semester   Semester     @relation(fields: [semesterId], references: [id])

  @@map("exams")
}

model ExamResult {
  id                 String       @id @default(uuid())
  totalMarksObtained Float?
  percentage         Float?
  status             ResultStatus
  remarks            String?
  grade              Float?
  studentId          String
  examId             String
  createdAt          DateTime     @default(now())
  updatedAt          DateTime     @updatedAt
  exam               Exam         @relation(fields: [examId], references: [id])
  student            User         @relation("examResults", fields: [studentId], references: [id])
  grades             Grade[]      @relation("ExamResultGrades")

  @@unique([studentId, examId])
  @@map("exam_results")
}

model Grade {
  id            String     @id @default(uuid())
  marksObtained Float
  examResultId  String
  subjectId     String
  createdAt     DateTime   @default(now())
  updatedAt     DateTime   @updatedAt
  examResult    ExamResult @relation("ExamResultGrades", fields: [examResultId], references: [id])
  subject       Subject    @relation("SubjectGrades", fields: [subjectId], references: [id])

  @@unique([examResultId, subjectId])
  @@map("grades")
}

enum ExamType {
  FINAL_EXAM
}

enum ResultStatus {
  PASS
  FAIL
  PENDING
  WITHHELD
}
